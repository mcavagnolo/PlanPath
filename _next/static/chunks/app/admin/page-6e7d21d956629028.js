(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{17170:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>c});var s=l(95155),a=l(12115),r=l(5772),i=l(99058),n=l(89674),o=l(57646);let d=({node:e,onDelete:t,onAddFolder:l})=>"file"===e.type?".keep"===e.name?null:(0,s.jsxs)("div",{className:"pl-6 py-1 text-sm text-gray-600 flex items-center gap-2 group",children:[(0,s.jsx)("span",{className:"opacity-50",children:"\uD83D\uDCC4"}),(0,s.jsx)("span",{className:"flex-1 truncate",children:e.name}),(0,s.jsx)("button",{onClick:()=>t(e.path,"file"),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 p-1",title:"Delete File",children:"\uD83D\uDDD1️"})]}):(0,s.jsxs)("details",{className:"pl-2",children:[(0,s.jsxs)("summary",{className:"cursor-pointer py-1 text-sm font-medium text-gray-800 hover:text-blue-600 select-none flex items-center gap-2 group",children:[(0,s.jsx)("span",{children:"\uD83D\uDCC1"}),(0,s.jsx)("span",{className:"flex-1",children:e.name}),(0,s.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100",children:[(0,s.jsx)("button",{onClick:t=>{t.preventDefault(),l(e.path)},className:"text-green-600 hover:text-green-800 p-1",title:"Add Subfolder",children:"➕"}),(0,s.jsx)("button",{onClick:l=>{l.preventDefault(),t(e.path,"folder")},className:"text-red-500 hover:text-red-700 p-1",title:"Delete Folder",children:"\uD83D\uDDD1️"})]})]}),(0,s.jsxs)("div",{className:"border-l border-gray-200 ml-2.5",children:[e.children?.map(e=>(0,s.jsx)(d,{node:e,onDelete:t,onAddFolder:l},e.path)),e.children?.length===0&&(0,s.jsx)("div",{className:"pl-6 py-1 text-xs text-gray-400 italic",children:"Empty folder"})]})]});function c(){let[e,t]=(0,a.useState)(null),[l,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)([]),[f,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[v,w]=(0,a.useState)(""),[N,k]=(0,a.useState)(""),[C,D]=(0,a.useState)({states:[],counties:[],cities:[]});(0,a.useEffect)(()=>{(0,o.c)().then(D)},[]);let[S,P]=(0,a.useState)(null),$=e=>{switch(e){case"State":return C.states;case"County":return C.counties;case"City":return C.cities;default:return[]}},I=async e=>{let t=(0,i.KR)(n.IG,e);try{let e=await (0,i._w)(t),l=[];for(let t of e.prefixes)l.push({name:t.name,path:t.fullPath,type:"folder",children:await I(t.fullPath)});for(let t of e.items)l.push({name:t.name,path:t.fullPath,type:"file"});return l}catch(e){return console.error("Error fetching file tree:",e),[]}},F=()=>{p(!0),I("knowledge-base").then(e=>h(e)).finally(()=>p(!1))};(0,a.useEffect)(()=>{F()},[]);let K=async e=>{if(e.preventDefault(),!S||0===S.length)return;if(!v||!N)return void alert("Please select a destination folder.");c(!0),m(`Uploading ${S.length} files...`);let t=0,l=0;for(let e=0;e<S.length;e++){let s=S[e];m(`Uploading ${e+1}/${S.length}: ${s.name}...`);let a=s.webkitRelativePath||s.name;if(s.name.startsWith("."))continue;let r=`knowledge-base/${v}/${N}/${a}`;try{let e=(0,i.KR)(n.IG,r);await (0,i.D)(e,s),t++}catch(e){console.error(`Failed to upload ${s.name}`,e),l++}}m(`Upload complete: ${t} successful, ${l} failed.`),c(!1),P(null),F()},R=async l=>{if(l.preventDefault(),e&&g&&y){c(!0),m("");try{let l=`knowledge-base/${g}/${y}/${e.name}`,s=(0,i.KR)(n.IG,l);await (0,i.D)(s,e),m(`Successfully uploaded ${e.name} to ${l}`),t(null),F()}catch(e){console.error(e),m("Error uploading file. Check console for details.")}finally{c(!1)}}},G=async e=>{let t=(0,i.KR)(n.IG,e),l=await (0,i._w)(t);for(let e of l.prefixes)await G(e.fullPath);for(let e of l.items)await (0,i.XR)(e)},E=async(e,t)=>{if(confirm(`Are you sure you want to delete this ${t}?`)){p(!0);try{"file"===t?await (0,i.XR)((0,i.KR)(n.IG,e)):await G(e),m(`${"file"===t?"File":"Folder"} deleted successfully.`),F()}catch(e){console.error(e),m(`Error deleting ${t}.`)}finally{p(!1)}}},_=async e=>{let t=prompt("Enter new folder name:");if(!t)return;let l=t.replace(/[^a-zA-Z0-9 -]/g,"").trim();if(!l)return void alert("Invalid folder name.");p(!0);try{let t=(0,i.KR)(n.IG,`${e}/${l}/.keep`);await (0,i.D)(t,new Blob(["placeholder"])),m(`Folder "${l}" created.`),F()}catch(e){console.error(e),m("Error creating folder.")}finally{p(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-[#fff9ea] shadow-sm",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(r.default,{src:"/PlanPath/logos/PlanPath Logo wName (Horizontal).png",alt:"PlanPath Logo",width:200,height:50,className:"h-12 w-auto",priority:!0})}),(0,s.jsxs)("nav",{children:[(0,s.jsx)("a",{href:"/PlanPath/",className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Home"}),(0,s.jsx)("a",{href:"#",className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Documentation"})]})]})}),(0,s.jsx)("main",{className:"py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Knowledge Base Administration"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-8",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Bulk Upload Codes Folder"}),(0,s.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsxs)("select",{value:v,onChange:e=>{w(e.target.value),k("")},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Category"}),(0,s.jsx)("option",{value:"State",children:"State"}),(0,s.jsx)("option",{value:"County",children:"County"}),(0,s.jsx)("option",{value:"City",children:"City"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Jurisdiction"}),(0,s.jsxs)("select",{value:N,onChange:e=>k(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2",required:!0,disabled:!v,children:[(0,s.jsx)("option",{value:"",children:"Select Jurisdiction"}),$(v).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Folder"}),(0,s.jsx)("input",{type:"file",webkitdirectory:"",directory:"",multiple:!0,onChange:e=>P(e.target.files),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),(0,s.jsx)("button",{type:"submit",disabled:l||!S||!v||!N,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400",children:l?"Uploading Folder...":"Upload All Files"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-8",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Single File Upload"}),(0,s.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsxs)("select",{value:g,onChange:e=>{b(e.target.value),j("")},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Category"}),(0,s.jsx)("option",{value:"State",children:"State"}),(0,s.jsx)("option",{value:"County",children:"County"}),(0,s.jsx)("option",{value:"City",children:"City"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Jurisdiction"}),(0,s.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2",required:!0,disabled:!g,children:[(0,s.jsx)("option",{value:"",children:"Select Jurisdiction"}),$(g).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Document (PDF/Text)"}),(0,s.jsx)("input",{type:"file",onChange:e=>t(e.target.files?.[0]||null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0})]}),(0,s.jsx)("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400",children:l?"Uploading...":"Upload to Knowledge Base"})]})]}),u&&(0,s.jsx)("div",{className:`p-4 rounded-md ${u.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:u})]}),(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md h-fit",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Base Files"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>_("knowledge-base"),className:"text-sm text-green-600 hover:text-green-800 underline",disabled:f,children:"+ New Root Folder"}),(0,s.jsx)("span",{className:"text-gray-300",children:"|"}),(0,s.jsx)("button",{onClick:F,className:"text-sm text-blue-600 hover:text-blue-800 underline",disabled:f,children:f?"Refreshing...":"Refresh"})]})]}),(0,s.jsx)("div",{className:"border rounded-md p-4 bg-gray-50 min-h-[400px] max-h-[800px] overflow-y-auto",children:f&&0===x.length?(0,s.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Loading files..."}):0===x.length?(0,s.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No files found in Knowledge Base"}):x.map(e=>(0,s.jsx)(d,{node:e,onDelete:E,onAddFolder:_},e.path))})]})]})]})}),(0,s.jsx)("footer",{className:"bg-[#fff9ea] border-t border-gray-200 mt-12",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex flex-col items-center",children:[(0,s.jsx)(r.default,{src:"/PlanPath/logos/PlanPath Logo.png",alt:"PlanPath Icon",width:32,height:32,className:"h-8 w-8 mb-2"}),(0,s.jsx)("p",{className:"text-center text-sm text-gray-500",children:"\xa9 2025 PlanPath. All rights reserved."})]})})]})}},57646:(e,t,l)=>{"use strict";l.d(t,{c:()=>r});var s=l(99058),a=l(89674);let r=async()=>{let e={states:[],counties:[],cities:[]};try{let t=(0,s.KR)(a.IG,"knowledge-base/State");e.states=(await (0,s._w)(t)).prefixes.map(e=>e.name);let l=(0,s.KR)(a.IG,"knowledge-base/County");e.counties=(await (0,s._w)(l)).prefixes.map(e=>e.name);let r=(0,s.KR)(a.IG,"knowledge-base/City");e.cities=(await (0,s._w)(r)).prefixes.map(e=>e.name)}catch(e){console.error("Error fetching jurisdiction options:",e)}return e}},76014:(e,t,l)=>{Promise.resolve().then(l.bind(l,17170))},89674:(e,t,l)=>{"use strict";l.d(t,{IG:()=>o});var s=l(97873),a=l(4927),r=l(99058),i=l(59997);let n=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyAJI3SYJGTx7RshdX8OXG8v2T6KMKyGMLk",authDomain:"planpath-458b1.firebaseapp.com",projectId:"planpath-458b1",storageBucket:"planpath-458b1.firebasestorage.app",messagingSenderId:"272519881718",appId:"1:272519881718:web:136859f0c4d81dcf6c5dd7",measurementId:"G-T4Q4HMJMYF"});(0,a.aU)(n);let o=(0,r.c7)(n);(0,i.xI)(n)}},e=>{e.O(0,[135,204,390,441,794,358],()=>e(e.s=76014)),_N_E=e.O()}]);